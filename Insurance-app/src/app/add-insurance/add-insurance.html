<div class="container">
  <h2>Add New Insurance Holder</h2>

  <form (ngSubmit)="insuranceForm.form.valid && saveInsurance()" #insuranceForm="ngForm" novalidate>

    <!-- Name -->
    <div class="form-group">
      <label>Name:</label>
      <input type="text" name="name" [(ngModel)]="insurance.name" required minlength="3" placeholder="Enter Full Name"
        #name="ngModel">
      <div *ngIf="name.invalid && (name.dirty || name.touched)" class="error">
        <small *ngIf="name.errors?.['required']">Name is required.</small>
        <small *ngIf="name.errors?.['minlength']">Name must be at least 3 characters.</small>
      </div>
    </div>

    <!-- Policy Number -->
    <div class="form-group">
      <label>Policy Number:</label>
      <input type="text" name="policyNumber" [(ngModel)]="insurance.policyNumber" required placeholder="POL-XXXX"
        #policy="ngModel">
      <div *ngIf="policy.invalid && (policy.dirty || policy.touched)" class="error">
        <small>Policy Number is required.</small>
      </div>
    </div>

    <!-- Policy Type -->
    <div class="form-group">
      <label>Policy Type:</label>
      <select name="policyType" [(ngModel)]="insurance.policyType" required #type="ngModel">
        <option value="" disabled>Select Type</option>
        <option value="Health">Health</option>
        <option value="Life">Life</option>
        <option value="Vehicle">Vehicle</option>
      </select>
      <div *ngIf="type.invalid && (type.dirty || type.touched)" class="error">
        <small>Please select a policy type.</small>
      </div>
    </div>

    <!-- Premium -->
    <div class="form-group">
      <label>Premium Amount:</label>
      <input type="number" name="premium" [(ngModel)]="insurance.premium" required min="1" #premium="ngModel">
      <div *ngIf="premium.invalid && (premium.dirty || premium.touched)" class="error">
        <small *ngIf="premium.errors?.['required']">Premium is required.</small>
        <small *ngIf="premium.errors?.['min']">Premium must be greater than 0.</small>
      </div>
    </div>

    <!-- Phone -->
    <div class="form-group">
      <label>Phone:</label>
      <input type="text" name="phone" [(ngModel)]="insurance.phone" required pattern="[0-9]{10}"
        placeholder="10 digit mobile number" #phone="ngModel">
      <div *ngIf="phone.invalid && (phone.dirty || phone.touched)" class="error">
        <small *ngIf="phone.errors?.['required']">Phone number is required.</small>
        <small *ngIf="phone.errors?.['pattern']">Phone must be exactly 10 digits (numbers only).</small>
      </div>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label>Email:</label>
      <input type="email" name="email" [(ngModel)]="insurance.email" required email placeholder="example@mail.com"
        #email="ngModel">
      <div *ngIf="email.invalid && (email.dirty || email.touched)" class="error">
        <small *ngIf="email.errors?.['required']">Email is required.</small>
        <small *ngIf="email.errors?.['email']">Please enter a valid email address.</small>
      </div>
    </div>

    <!-- Date of Birth -->
    <div class="form-group">
      <label>Date of Birth:</label>
      <input type="date" name="dateOfBirth" [(ngModel)]="insurance.dateOfBirth" required #dob="ngModel">
      <div *ngIf="dob.invalid && (dob.dirty || dob.touched)" class="error">
        <small>Date of Birth is required.</small>
      </div>
    </div>

    <!-- Nominee -->
    <div class="form-group">
      <label>Nominee:</label>
      <input type="text" name="nominee" [(ngModel)]="insurance.nominee" required #nominee="ngModel">
      <div *ngIf="nominee.invalid && (nominee.dirty || nominee.touched)" class="error">
        <small>Nominee name is required.</small>
      </div>
    </div>

    <h3>Address</h3>
    <div class="address-group">
      <div class="form-group">
        <label>Street:</label>
        <input type="text" name="street" [(ngModel)]="insurance.address.street" required #street="ngModel">
        <div *ngIf="street.invalid && (street.dirty || street.touched)" class="error">
          <small>Street is required.</small>
        </div>
      </div>
      <div class="form-group">
        <label>City:</label>
        <input type="text" name="city" [(ngModel)]="insurance.address.city" required #city="ngModel">
        <div *ngIf="city.invalid && (city.dirty || city.touched)" class="error">
          <small>City is required.</small>
        </div>
      </div>
      <div class="form-group">
        <label>State:</label>
        <input type="text" name="state" [(ngModel)]="insurance.address.state" required #state="ngModel">
        <div *ngIf="state.invalid && (state.dirty || state.touched)" class="error">
          <small>State is required.</small>
        </div>
      </div>
      <div class="form-group">
        <label>Pincode:</label>
        <input type="text" name="pincode" [(ngModel)]="insurance.address.pincode" required pattern="[0-9]{6}"
          placeholder="6 digit pincode" #pincode="ngModel">
        <div *ngIf="pincode.invalid && (pincode.dirty || pincode.touched)" class="error">
          <small *ngIf="pincode.errors?.['required']">Pincode is required.</small>
          <small *ngIf="pincode.errors?.['pattern']">Pincode must be 6 digits.</small>
        </div>
      </div>
    </div>

    <button type="submit" [disabled]="!insuranceForm.form.valid">Submit</button>
  </form>
</div>